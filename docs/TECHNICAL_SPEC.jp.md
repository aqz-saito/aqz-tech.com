# AQZ Tech Chronicle 技術仕様書

## 1. プロジェクト概要

### 1.1 基本情報

- サイト名: AQZ Tech Chronicle
- ドメイン: aqz-tech.com
- 運営: 合同会社アキューズ(AQZ LLC)
- 言語: 英語
- リポジトリ名: aqz-tech.com

### 1.2 プロジェクトの性質

技術開発に関する記事を英語で発信する技術ブログ。
「Chronicle（年代記、記録）」という名称の通り、技術的な知見や開発過程を継続的に記録・共有することを目指す。

### 1.3 目的

- IT開発技術情報の英語発信
- 技術実験の場としての活用（react.jsアイランドアーキテクチャなど）
- 日本語版技術ブログの英語対応版
- オープンソースとしての技術共有

### 1.4 運営方針

- 個人運営（投稿者1名）
- シンプルな構成維持
- 読者とのインタラクションなし
- お問い合わせは会社フォームに誘導
- GitHubでのイシュー管理

## 2．開発アプローチ

### 2.1 開発手法

#### AI協調開発

- ChatGPT/Claude等のAIとの共働開発を基本方針とする
- プロンプトエンジニアリングを活用した効率的な開発
- 人間とAIの役割を明確に分離

#### 役割分担

- 人間側の責務:
  - プロジェクトの要件定義
  - 設計方針の決定
  - AIへの指示と説明
  - 成果物のレビュー
  - フィードバックの提供
  - 必要最小限の手動修正
- AI側の責務:
  - 設計書の作成
  - プログラムコードの生成
  - ドキュメントの作成
  - バグ修正の提案
  - 改善案の提示

### 2.2 テーマ開発方針

#### 基本方針

- 既存テーマの利用・カスタマイズは行わない
- ゼロからのオリジナルテーマ開発
- AIとの対話による設計・実装

#### 開発プロセス

1. 要件のAIへの説明
2. AIによる設計案の生成
3. 設計案のレビューとフィードバック
4. AIによる実装コードの生成
5. コードレビューと改善指示
6. 必要に応じた手動調整
7. 上記プロセスの反復

### 2.3 品質管理

#### レビュー基準

- パフォーマンス要件の充足
- アクセシビリティガイドラインへの準拠
- クロスブラウザ対応の確認
- セキュリティ要件の充足

#### 改善プロセス

- AIへの明確なフィードバック
- 具体的な改善指示
- 繰り返しの検証と修正
- 必要な場合の手動介入

### 2.4 開発効率化

- 過去のプロンプトの活用
- 生成コードの再利用
- 設計パターンの蓄積

## 3. 技術アーキテクチャ

### 3.1 コアテクノロジー

- メインフレームワーク: Astro v4
- 言語:
  - TypeScript
  - Markdown/MDX（コンテンツ）
- スタイリング:
  - TailwindCSS
  - Material Icons
  - CSS Modules（必要に応じて）
- デプロイ先:
  - Cloudflare Pages（メインサイト・検索アプリケーション）

### 3.2 開発環境

- パッケージマネージャー: pnpm
- コード品質:
  - ESLint（TypeScript対応）
  - Prettier
  - markdownlint
- ビルドツール:
  - Vite（Astroメインサイト）
  - astro標準ビルドツール（検索機能）
- アセット最適化:
  - Astroの画像最適化
  - TailwindCSSのPurge機能

### 3.3 型システム

- コンテンツ:
  - Astro Content Collectionsによるフロントマターの型安全性確保
  - TypeScript型定義（共通の型を両プロジェクトで使用）

### 3.4 設定管理

#### site.config.ts による一元管理

- サイト基本情報:
  - サイト名
  - 説明文
  - 公開URL
  - 言語設定
  - デフォルトタイムゾーン
- SEO関連設定:
  - デフォルトのメタタグ
  - OGP設定
  - Twitter Card設定
- 外部サービス連携:
  - Google Analytics ID
  - その他APIキー
- 環境変数（.env）との使い分け:
  - 公開可能な設定: site.config.ts
  - 機密情報: 環境変数

#### 設定ファイルの構成方針

- TypeScriptの型定義による設定値の検証
- 本番/開発環境での設定値の切り替え
- コンポーネントでの型安全な設定値の参照

## 4. 機能仕様

### 4.1 コア機能

- 記事一覧・詳細表示
- カテゴリ/タグフィルタリング
- シリーズナビゲーション
- ダークモード切替
- レスポンシブデザイン

### 4.2 デザイン仕様

- オリジナルカスタムテーマ
- シンプルなデザインアプローチ
- グリッド表示によるブログ記事一覧
- ヒーロー画像対応
- モバイルファーストのレスポンシブデザイン
- ダークモード対応

### 4.3 検索機能

- Reactコンポーネントとして実装
- クライアントサイド検索の採用
- ビルド時生成の静的JSONをデータソースとして使用
- TypeScriptによる型安全な実装

### 4.4 実装しない機能

- コメント機能
- いいね機能
- 独自お問い合わせフォーム
- 独自プライバシーポリシー

## 5. コンテンツ管理

### 5.1 記事フロントマター

#### 必須フィールド

```yaml
title: 記事タイトル
description: 記事の説明文
pubDate: 公開日（ISO 8601形式）
updatedDate: 更新日（ISO 8601形式）
heroImage: ヒーロー画像のパス
headline: 記事見出し（タイトルとは別に設定）
category: カテゴリ
tags: [タグの配列]
```

#### オプションフィールド

```yaml
series: シリーズ名
seriesIndex: シリーズ内の順序（数値）
draft: 下書きフラグ（デフォルト: false）
```

### 5.2 フロントマター利用方針

- タイトルと見出しの使い分け:
  - `title`: 一覧表示やメタデータ用の簡潔なタイトル
  - `headline`: 記事ページ内で使用する詳細な見出し

- 画像管理:
  - ヒーロー画像は必須
  - パスは `/src/assets/images/blog/` 以下に配置
  - WebP形式を使用

- 日付形式:
  - ISO 8601形式を使用（例: '2024-12-18T00:00:00.000Z'）
  - 公開日と更新日を別々に管理

- シリーズ管理:
  - シリーズ物の記事は `series` と `seriesIndex` を設定
  - シリーズ内での順序は `seriesIndex` で管理
  - 単独記事の場合は省略可能

- カテゴリとタグ:
  - カテゴリは1つのみ設定
  - タグは複数設定可能
  - タグは配列形式で管理

## 6. 開発プロセス

### 6.1 ソースコード管理

#### リポジトリ構成

- 公開状態: パブリックリポジトリ
- ホスティング: GitHub
- 公開範囲:
  - ソースコード一式
  - 記事コンテンツ
  - 設定ファイル
  - アセット類

#### ブランチ戦略

- メインブランチ: main
- 開発手法: GitHub Flow
- ブランチ運用:
  - 基本的にmainブランチのみを使用
  - 新機能開発時のみフィーチャーブランチを作成
  - フィーチャーブランチは機能完成後にmainにマージ
  - プルリクエストによるコード変更の管理はしない

#### コミットルール

- コミットメッセージは英語で記述
- 意味のある単位でのコミット
- プレフィックスの使用（feat:, fix:, docs:, etc.）

### 6.2 デプロイ/自動化

#### Cloudflare Pagesデプロイ

- GitHubリポジトリと連携
- Astroフレームワークの自動認識
- mainブランチの変更で自動デプロイ
- プレビューブランチのデプロイ設定

#### GitHub Actions自動化

- 記事の自動公開処理
  - cronで1日1回実行
  - 現在時刻より前の公開日の記事をビルド対象に含める
  - draft: false の記事のみを対象

### 6.3 開発条件

- ホットリロード対応（npm run dev）
- Markdownフロントマター検証
- 画像のalt属性チェック
- GitHubフロー準拠の開発プロセス

### 6.4 外部連携

- dev.to（手動クロスポスト）
- GitHub（プロジェクトリポジトリへのリンク）
- 会社ウェブサイト（お問い合わせ、プライバシーポリシー）

## 7. 非機能要件

### 7.1 パフォーマンス要件

- Astro v4の標準機能を活用
  - 画像の自動最適化機能の利用
  - ビルド時のアセット最適化
  - クライアントJavaScriptの最小化
- 想定データ量:
  - 記事数：最大1000件（10年間）
  - 静的コンテンツのみ
  - コメント機能なし

### 7.2 セキュリティ要件

- 機密情報の管理:
  - 環境変数（SECRET）での管理
  - .env.localファイルの作成と.gitignoreでの除外
  - .env.exampleの提供（変数名のみ記載）
- Cloudflare Pagesの基本セキュリティ設定を活用

### 7.3 エラーハンドリング

- 404ページの実装:
  - クリエイティブな多言語対応404ページの作成
  - 既存の404ページデザインの流用
- エラー監視:
  - Google Search Consoleによる監視
  - Cloudflare Analyticsの活用（オプション）

## 8. 開発優先順位と特記事項

### 8.1 基本機能の実装範囲

#### 記事表示基盤

- 記事一覧・詳細表示
- カテゴリ/タグフィルタリング
- シリーズナビゲーション
- レスポンシブデザイン
- ダークモード対応

#### SEO対応

- メタタグ最適化
- OGP対応
- サイトマップ生成
- robots.txt設定

#### 検索機能

- 記事内容の全文検索
- タグ・カテゴリによるフィルタリング
- react.jsによるインタラクティブ実装

#### 既存コンポーネントの統合

- PlantUMLダイアグラム表示
- 会話形式表示
- コードブロック
- その他Markdownエクステンション

### 8.2 追加機能の実装検討

1. UX改善機能
   - 目次自動生成
   - スクロール位置の保存
   - ページ内検索の強化
2. 分析機能
   - アクセス解析
   - 人気記事の可視化
   - 検索キーワード分析

### 8.3 特記事項

- すべての開発は英語で行う
- コードコメントも英語で記述
- 実験的な実装（react.jsなど）はパフォーマンスに影響しない範囲で行う
- アクセシビリティへの配慮は継続的に行う
- パフォーマンス最適化はAstro v4の標準機能を優先的に活用
- セキュリティ設定は必要最小限とし、必要に応じて拡張
- エラー対応は自動化を重視し、手動での監視・対応を最小化
