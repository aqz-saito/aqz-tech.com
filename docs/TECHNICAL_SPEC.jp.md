# AQZ Tech Chronicle 技術仕様書

## 基本情報

### サイト情報

- **サイト名**: AQZ Tech Chronicle
- **ドメイン**: aqz-tech.com
- **言語**: 英語
- **運営**: 合同会社アキューズ(AQZ LLC)
- **リポジトリ名**: aqz-tech.com

### 概要説明

技術開発に関する記事を英語で発信する技術ブログ。
「Chronicle（年代記、記録）」という名称の通り、技術的な知見や開発過程を継続的に記録・共有することを目指す。

## サイトの目的と方針

### 目的

- IT開発に関する技術情報の英語での発信
- 技術実験の場としての活用（Next.jsアイランドアーキテクチャなど）
- 日本語版技術ブログの英語対応版として構築
- オープンソースとしての技術共有

### 運営方針

- 個人での運営（投稿者は1名）
- シンプルな構成の維持
- 読者との直接的なインタラクションは行わない
- お問い合わせは会社のフォームに誘導
- GitHubでのイシュー管理

## ソースコード管理

### リポジトリ構成

- **公開状態**: パブリックリポジトリ
- **ホスティング**: GitHub
- **公開範囲**:
  - ソースコード一式
  - 記事コンテンツ
  - 設定ファイル
  - アセット類

### ブランチ戦略

- **メインブランチ**: main
- **開発手法**: GitHub Flow
- **ブランチ運用**:
  - 基本的にmainブランチのみを使用
  - 新機能開発時のみフィーチャーブランチを作成
  - フィーチャーブランチは機能完成後にmainにマージ
  - プルリクエストによるコード変更の管理はしない

### コミットルール

- コミットメッセージは英語で記述
- 意味のある単位でのコミット
- プレフィックスの使用（feat:, fix:, docs:, etc.）

## 技術スタック

### コアテクノロジー

- **メインフレームワーク**: Astro v4
- **言語**:
  - TypeScript
  - Markdown/MDX（コンテンツ）
- **スタイリング**:
  - TailwindCSS
  - Material Icons
  - CSS Modules（必要に応じて）
- **デプロイ先**:
  - Cloudflare Pages（メインサイト・検索アプリケーション）

### 開発環境

- **パッケージマネージャー**: pnpm
- **コード品質**:
  - ESLint（TypeScript対応）
  - Prettier
  - markdownlint

### ビルドツール

- **バンドラー**:
  - Vite（Astroメインサイト）
  - Next.js標準ビルドツール（検索機能）
- **アセット最適化**:
  - Astroの画像最適化
  - TailwindCSSのPurge機能

### 型定義

- **コンテンツ**:
  - Astro Content Collectionsによるフロントマターの型安全性確保
  - TypeScript型定義（共通の型を両プロジェクトで使用）

## 機能仕様

### コア機能

- 記事一覧表示
- 記事詳細表示
- カテゴリ/タグによる記事フィルタリング
- シリーズ記事のナビゲーション
- ダークモード切替
- レスポンシブデザイン

### デザイン仕様

- オリジナルカスタムテーマ
- シンプルなデザインアプローチ
- グリッド表示によるブログ記事一覧
- ヒーロー画像対応
- モバイルファーストのレスポンシブデザイン
- ダークモード対応

### 検索機能

#### アーキテクチャー

- 独立したアプリケーションとして実装
- Cloudflare Workersでバックエンド実装
  - wranglerによるローカル開発環境
  - ソースコードレベルのデバッグ可能
- 静的JSONファイルを元にした検索機能

#### データ同期

- メインサイトのビルド時に検索用JSONを生成
- 記事のメタデータ（タイトル、説明、タグ等）のみ格納
- 静的アセットとしてデプロイ

#### 開発環境

- wrangler CLIによるローカル開発
- TypeScriptによる型安全な実装
- ホットリロード対応

## コンテンツ構造

### 記事フロントマター

- **必須フィールド**
  - `title`: 記事タイトル
  - `description`: 記事の説明文
  - `pubDate`: 公開日（ISO 8601形式）
  - `updatedDate`: 更新日（ISO 8601形式）
  - `heroImage`: ヒーロー画像のパス
  - `headline`: 記事見出し（タイトルとは別に設定）
  - `category`: カテゴリ
  - `tags`: タグの配列

- **オプションフィールド**
  - `series`: シリーズ名
  - `seriesIndex`: シリーズ内の順序（数値）
  - `draft`: 下書きフラグ（デフォルト: false）

### フロントマター利用方針

- タイトルと見出しの使い分け
  - `title`: 一覧表示やメタデータ用の簡潔なタイトル
  - `headline`: 記事ページ内で使用する詳細な見出し

- 画像管理
  - ヒーロー画像は必須
  - パスは `/src/assets/images/blog/` 以下に配置
  - WebP形式を使用

- 日付形式
  - ISO 8601形式を使用（例: '2024-12-18T00:00:00.000Z'）
  - 公開日と更新日を別々に管理

- シリーズ管理
  - シリーズ物の記事は `series` と `seriesIndex` を設定
  - シリーズ内での順序は `seriesIndex` で管理
  - 単独記事の場合は省略可能

- カテゴリとタグ
  - カテゴリは1つのみ設定
  - タグは複数設定可能
  - タグは配列形式で管理

## 技術要件

### パフォーマンス要件

- Astro v4の標準機能を活用
  - 画像の自動最適化機能の利用
  - ビルド時のアセット最適化
  - クライアントJavaScriptの最小化
- 想定データ量
  - 記事数：最大1000件（10年間）
  - 静的コンテンツのみ
  - コメント機能なし

### セキュリティ要件

- 機密情報の管理
  - 環境変数（SECRET）での管理
  - .env.localファイルの作成と.gitignoreでの除外
  - .env.exampleの提供（変数名のみ記載）
- Cloudflare Pagesの基本セキュリティ設定を活用

### エラーハンドリング

- 404ページの実装
  - クリエイティブな多言語対応404ページの作成
  - 既存の404ページデザインの流用
- エラー監視
  - Google Search Consoleによる監視
  - Cloudflare Analyticsの活用（オプション）

## 開発環境

- ホットリロード対応（npm run dev）
- Markdownフロントマター検証
- 画像のalt属性チェック
- GitHubフロー準拠の開発プロセス

## デプロイ/自動化

- GitHub Actionsによる自動デプロイ
- プレビューデプロイ設定
- 記事の自動投稿（開発済）
- mainブランチへのマージで自動デプロイ

## 外部連携

- dev.to（手動クロスポスト）
- GitHub（プロジェクトリポジトリへのリンク）
- 会社ウェブサイト（お問い合わせ、プライバシーポリシー）

## 開発優先順位

1. 基本機能（記事表示、デザイン）
2. カスタムコンポーネント（PlantUML、会話表示）
3. SEO対策
4. 検索機能（Next.js実装）
5. UX改善機能
6. 分析機能

## 実装しない機能

- コメント機能
- いいね機能
- 独自のお問い合わせフォーム
- 独自のプライバシーポリシー

## 特記事項

- すべての開発は英語で行う
- コードコメントも英語で記述
- 実験的な実装（Next.jsなど）はパフォーマンスに影響しない範囲で行う
- アクセシビリティへの配慮は継続的に行う
- パフォーマンス最適化はAstro v4の標準機能を優先的に活用
- セキュリティ設定は必要最小限とし、必要に応じて拡張
- エラー対応は自動化を重視し、手動での監視・対応を最小化
